**protocol** - Протокол по которому пользователи заходят на ваш сайт(http или https)

**domain** - Домен вашего сайта

**port** - Порт вашего сайта, если ваш сайт находится на 80 порте, т.е. в адрессной строке после домена через двоеточие не указано число, то данный параметры указывать не прийдётся!

**protocol://domain:port/** - Может быть как `https://example.com/` так и `https://example.com:80/`

## Установка

1. Распаковываем содержимое репозитория в корень сайта
2. Авторизовываемся в **protocol://domain:port/manager/index.php**
3. В левой части админки `Элементы` > `Сниппеты`, нажимаем на `Сниппеты` правой кнопкой мыши > `Новый сниппет`
4. Имя - `mandarin`, описание - `Платёжная система`
5. Вставляем код приведённый ниже в поле сниппет:
```php
<?php
$output = '';
$mid="merchant-id";
$msec='secret';

require_once $modx->getOption('core_path')."components/mandarin.php";
return $output;
?>
```
6. Заменяем `merchant-id` на ваш ID мерчанта(ковычки оставляем), `secret` на Ваш секретный ключ(ковычки оставляем)
7. Переходим в `Ресурсы` > `Спасибо!`
8. В тексте ресурса в самом начале добавляем одну строку: `[[!mandarin]]`
9. Сохраняем ресурс `Спасибо!`
10. Переходим в `Приложения` > `Управление заказами`
11. Нажимаем на гамбургер меню(четыре полоски горизонтальных, справа от кнопки `Удалить`) > `Настройки`
12. Выбираем `Методы оплаты`. Название - `MandarinBank`, значение - `mandarin`. Нажимаем `Сохранить`
13. В системе MandarinPay указываем
- callbackURL - **protocol://domain:port/payment-mandarin.php**
- returnURL - **protocol://domain:port/spasibo.html**
